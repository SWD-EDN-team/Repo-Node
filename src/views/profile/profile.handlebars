<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Profile Form</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      {{!-- .profile-img { width: 80px; height: 80px; border-radius: 50%; object-fit:
      cover; } .edit-icon { position: absolute; bottom: 5px; right: 5px;
      background: white; border-radius: 50%; padding: 5px; } --}}
      .filepond--root {
          border: 2px dashed #4CAF50 !important;
          border-radius: 12px !important;
          background-color: #f8f9fa !important;
      }

      .filepond--drop-label {
          color: #333 !important;
          font-size: 16px;
          font-weight: bold;
      }

      .filepond--file-action-button {
          background-color: #4CAF50 !important;
          color: white !important;
      }

      .filepond--panel-root {
          border-radius: 50% !important;
      }

      .filepond--image-preview-wrapper {
          border-radius: 50% !important;
          overflow: hidden !important;
      }
    </style>
    <link href="https://unpkg.com/filepond/dist/filepond.css" rel="stylesheet">
    </head>
<body class="p-4">
  <div class="container d-flex">
    <!-- Sidebar -->
    <aside class="sidebar p-3 border rounded shadow-sm me-4" style="width: 250px; background-color: #f4f4f4;">
      {{> sidebar}}
    </aside>

    <!-- Main Content -->
    <div class="flex-grow-1">
      <!-- Profile Section -->
      <div class="d-flex align-items-center mb-4">
      <div class="position-relative text-center">
          <img id="profile-img" src="{{user.avatar}}" alt="Profile Picture" class="profile-img rounded-circle" width="100" height="100" />
          
          <input type="file" id="avatar-input" name="avatar" accept="image/*">
      </div>
        <button class="btn btn-dark ms-auto">
          <i class="bi bi-pencil-square me-1"></i>
          Edit Profile
        </button>
      </div>

    <!-- Form Section -->
      <form>
        <div class="row mb-3">
          <div class="col-md-6">
            <label class="form-label">Full Name</label>
            <input type="text" class="form-control" value="{{user.name}}" readonly />
          </div>
          <div class="col-md-6">
            <label class="form-label">Role</label>
            <input type="text" class="form-control" value="{{user.role}}" readonly />
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label class="form-label">Email Address</label>
            <input type="email" class="form-control" value="{{user.email}}" readonly />
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label">Address</label>
          <input type="text" class="form-control" value="{{user.address.[0]}}" />
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label class="form-label">Gender</label>
            <input type="text" class="form-control" value="{{user.gender}}" readonly />
          </div>
        </div>
      </form>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/filepond/dist/filepond.js"></script>
  <script>
    FilePond.create(document.getElementById('avatar-input'), {
        labelIdle: `
            üñºÔ∏è <span class="filepond--label-action">Ch·ªçn ·∫£nh</span> ho·∫∑c k√©o th·∫£ v√†o ƒë√¢y`,
        imagePreviewHeight: 150, // TƒÉng k√≠ch th∆∞·ªõc preview
        imageCropAspectRatio: '1:1',
        imageResizeTargetWidth: 250,
        imageResizeTargetHeight: 250,
        stylePanelLayout: 'compact', // Giao di·ªán g·ªçn g√†ng
        styleLoadIndicatorPosition: 'center', // Hi·ªÉn th·ªã loading ·ªü trung t√¢m
        styleProgressIndicatorPosition: 'bottom', // Ti·∫øn tr√¨nh upload n·∫±m ·ªü d∆∞·ªõi
        styleButtonRemoveItemPosition: 'left', // N√∫t x√≥a ·∫£nh n·∫±m b√™n tr√°i
        styleButtonProcessItemPosition: 'right', // N√∫t upload n·∫±m b√™n ph·∫£i
        allowImageTransform: true,
        server: {
            process: '/upload-avatar',
            headers: {
                Authorization: `Bearer ${localStorage.getItem("token")}`
            }
        }
    });
  </script>
</body>